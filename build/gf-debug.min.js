/**
 * @license
 * GrapeFruit Debug Module - v0.0.1
 * Copyright (c) 2013, Chad Engler
 * https://github.com/grapefruitjs/gf-debug
 *
 * Compiled: 2013-10-13
 *
 * GrapeFruit Debug Module is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license.php
 */
!function(window,undefined){var document=window.document;gf.plugin.register({},"debug"),gf.debug.version="0.0.1",gf.debug.onTick=function(){this._super();var dEnd,dStart=gf.debug.game.clock.now();gf.debug._statsTick(),gf.debug.panels&&(gf.debug.panels.map.tick(),gf.debug.panels.performance.tick(),gf.debug.panels.sprites.tick()),dEnd=gf.debug.game.clock.now(),gf.debug.game.timings.__debugLastDiff=dEnd-dStart},gf.debug.show=function(game){if(!(game&&game instanceof gf.Game))throw"Please pass a game instance to gf.debug.show!";if(this.game)throw"Already debugging a game instance!";this.game=game,this.panels={map:new gf.debug.MapPanel(game),sprites:new gf.debug.SpritesPanel(game),gamepad:new gf.debug.GamepadPanel(game),performance:new gf.debug.PerformancePanel(game)},gf.plugin.patch(gf.Game,"_tick",this.onTick),this.logObjectCountEvent=!1,document.body.appendChild(this._createElement()),this._bindEvents()},gf.debug.logEvent=function(name){this.panels&&this.panels.performance&&this.panels.performance.logEvent(name)},gf.debug.drawBodyShape=function(body,style,gfx){var shape=body.shape,p=shape.position,game=this.game;if(gfx=gfx||function(){var g=new gf.PIXI.Graphics;return game.world.add.obj(g),g}(),style=style||{},gfx.lineStyle(style.size!==undefined?style.size:1,style.color!==undefined?style.color:16720418,style.alpha!==undefined?style.alpha:1),shape._shapetype===gf.SHAPE.CIRCLE)gfx.drawCircle(p.x,p.y,shape.radius);else{var pt=shape.points[0];gfx.moveTo(p.x+pt.x,p.y+pt.y);for(var x=1;x<shape.points.length;x++)gfx.lineTo(p.x+shape.points[x].x,p.y+shape.points[x].y);gfx.lineTo(p.x+pt.x,p.y+pt.y)}return gfx},gf.debug.drawQuadTree=function(tree,style,gfx){var self=this;if(gfx=gfx||function(){var g=new gf.PIXI.Graphics;return self.game.world.add.obj(g),g}(),tree=tree||this.game.physics.tree,style=style||{},gfx.lineStyle(style.size!==undefined?style.size:1,style.color!==undefined?style.color:2237183,style.alpha!==undefined?style.alpha:1),gfx.drawRect(tree.bounds.x,tree.bounds.y,tree.bounds.width,tree.bounds.height),tree.nodes.length)for(var i=0;i<tree.nodes.length;++i)this.drawQuadTree(tree.nodes[i],style,gfx);return gfx},gf.debug._bindEvents=function(){var activePanel,self=this;this.ui.delegate(this._bar,"click",".gf_debug_menu_item",function(e){var panel=self.panels[e.target.className.replace(/gf_debug_menu_item|active/g,"").trim()];if(panel){if(activePanel&&(activePanel.toggle(),self.ui.removeClass(activePanel._menuItem,"active"),activePanel.name===panel.name))return activePanel=null,void 0;"performance"===panel.name?panel.active=!0:self.panels.performance.active=!1,self.ui.addClass(e.target,"active"),panel.toggle(),activePanel=panel}})},gf.debug._createElement=function(){var c=this._container=document.createElement("div"),bar=this._bar=document.createElement("div");this.ui.addClass(c,"gf_debug"),c.appendChild(bar),this.ui.addClass(bar,"gf_debug_menu"),bar.appendChild(this._createMenuHead()),bar.appendChild(this._createMenuStats());for(var p in this.panels)bar.appendChild(this.panels[p].createMenuElement()),c.appendChild(this.panels[p].createPanelElement());return c},gf.debug._createMenuHead=function(){var div=document.createElement("div");return this.ui.addClass(div,"gf_debug_head"),this.ui.setText(div,"Gf Debug ("+this.game.renderMethod+"):"),div},gf.debug._createMenuStats=function(){this._stats={};var div=document.createElement("div"),fps=this._stats.fps=document.createElement("div"),ms=this._stats.ms=document.createElement("div"),obj=this._stats.obj=document.createElement("div");return this.ui.addClass(div,"gf_debug_stats"),this.ui.addClass(ms,"gf_debug_stats_item ms"),this.ui.setHtml(ms,"<span>0</span> ms"),div.appendChild(ms),this.ui.addClass(fps,"gf_debug_stats_item fps"),this.ui.setHtml(fps,"<span>0</span> fps"),div.appendChild(fps),this.ui.addClass(obj,"gf_debug_stats_item obj"),this.ui.setHtml(obj,"<span>0</span> objects"),div.appendChild(obj),div},gf.debug._statsTick=function(){var ms=this.game.timings.tickEnd-this.game.timings.tickStart,fps=1e3/ms;fps=fps>60?60:fps,this.ui.setText(this._stats.ms.firstElementChild,ms.toFixed(2)),this.ui.setText(this._stats.fps.firstElementChild,fps.toFixed(2))},gf.debug.Panel=function(game){this.game=game,this.name="",this.title=""},gf.inherit(gf.debug.Panel,Object,{createPanelElement:function(){var div=this._panel=document.createElement("div");return gf.debug.ui.addClass(div,"gf_debug_panel"),gf.debug.ui.addClass(div,this.name),div},createMenuElement:function(){var div=this._menuItem=document.createElement("div");return gf.debug.ui.addClass(div,"gf_debug_menu_item "+this.name),gf.debug.ui.setText(div,this.title),div},toggle:function(){"block"===this._panel.style.display?this.hide():this.show()},show:function(){gf.debug.ui.setStyle(this._panel,"display","block")},hide:function(){gf.debug.ui.setStyle(this._panel,"display","none")}}),gf.debug.GamepadPanel=function(game){gf.debug.Panel.call(this,game),this.name="gamepad",this.title="Gamepad",this.gamepad=new gf.debug.Gamepad,this.bindEvents()},gf.inherit(gf.debug.GamepadPanel,gf.debug.Panel,{createPanelElement:function(){var div=gf.debug.Panel.prototype.createPanelElement.call(this);return div.appendChild(this.gamepad.element),window.console.log(this.gamepad.element),div},bindEvents:function(){var game=this.game,pad=this.gamepad;game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.FACE_1,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.FACE_2,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.FACE_3,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.FACE_4,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.LEFT_SHOULDER,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.RIGHT_SHOULDER,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.LEFT_TRIGGER,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.RIGHT_TRIGGER,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.SELECT,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.START,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.LEFT_ANALOGUE_STICK,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.RIGHT_ANALOGUE_STICK,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.PAD_TOP,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.PAD_BOTTOM,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.PAD_LEFT,pad.updateButton.bind(pad)),game.input.gamepad.buttons.on(gf.GamepadButtons.BUTTON.PAD_RIGHT,pad.updateButton.bind(pad)),game.input.gamepad.sticks.on(gf.GamepadSticks.AXIS.LEFT_ANALOGUE_HOR,pad.updateAxis.bind(pad)),game.input.gamepad.sticks.on(gf.GamepadSticks.AXIS.LEFT_ANALOGUE_VERT,pad.updateAxis.bind(pad)),game.input.gamepad.sticks.on(gf.GamepadSticks.AXIS.RIGHT_ANALOGUE_HOR,pad.updateAxis.bind(pad)),game.input.gamepad.sticks.on(gf.GamepadSticks.AXIS.RIGHT_ANALOGUE_VERT,pad.updateAxis.bind(pad))}}),gf.debug.PerformancePanel=function(game){gf.debug.Panel.call(this,game),this.name="performance",this.title="Performance",this.eventQueue=[],this.active=!1},gf.inherit(gf.debug.PerformancePanel,gf.debug.Panel,{createPanelElement:function(){var div=gf.debug.Panel.prototype.createPanelElement.call(this);return this.graph=new gf.debug.Graph(div,window.innerWidth-20,245,{input:"rgba(80, 220, 80, 1)",camera:"rgba(80, 80, 220, 1)",phys:"rgba(80, 220, 200, 1)",user:"rgba(200, 80, 220, 1)",draw:"rgba(220, 80, 80, 1)",debug:"rgba(220, 220, 80, 1)",event:"rgba(200, 200, 200, 0.6)"}),this.graph.max=30,div},tick:function(){if(this.active){var t=this.game.timings,o={input:t.inputEnd-t.inputStart,camera:t.cameraEnd-t.cameraStart,phys:t.physicsEnd-t.physicsStart,user:t.userFuncsEnd-t.userFuncsStart,debug:t.__debugLastDiff||0,draw:t.renderEnd-t.renderStart},evt=this.eventQueue.shift();evt&&(o.event=evt),this.graph.addData(o)}},logEvent:function(name){this.eventQueue.push(name)}}),gf.debug.SpritesPanel=function(game){gf.debug.Panel.call(this,game),this.name="sprites",this.title="Sprites",this.gfx=new gf.PIXI.Graphics,this.game.world.add.obj(this.gfx),this.style={_defaultShape:{size:1,color:16720418,alpha:1},sensorShape:{size:1,color:2293538,alpha:1},tree:{size:1,color:2237183,alpha:1}},this.showing={shapes:!1,tree:!1}},gf.inherit(gf.debug.SpritesPanel,gf.debug.Panel,{createPanelElement:function(){var div=gf.debug.Panel.prototype.createPanelElement.call(this),pad=document.createElement("div"),col=document.createElement("div");return gf.debug.ui.addClass(col,"checkbox"),gf.debug.ui.setHtml(col,'<input type="checkbox" value="" id="gf_debug_toggleShapes" class="gf_debug_toggleShapes" name="check" /><label for="gf_debug_toggleShapes"></label><span>Draw Collider Shapes</span><br/><input type="checkbox" value="" id="gf_debug_toggleQuadTree" class="gf_debug_toggleQuadTree" name="check" /><label for="gf_debug_toggleQuadTree"></label><span>Draw QuadTree</span>'),gf.debug.ui.delegate(col,"click",".gf_debug_toggleShapes",this.toggleType.bind(this,"shapes")),gf.debug.ui.delegate(col,"click",".gf_debug_toggleQuadTree",this.toggleType.bind(this,"tree")),pad.appendChild(col),div.appendChild(pad),div},toggleType:function(type){this.showing[type]=!this.showing[type]},tick:function(){if(this.gfx.clear(),this.showing.shapes)for(var bods=this.game.physics.bodies,i=0;i<bods.length;++i)gf.debug.drawBodyShape(bods[i],bods[i].sensor?this.style.sensorShape:this.style._defaultShape,this.gfx);this.showing.tree&&gf.debug.drawQuadTree(this.game.physics.tree,this.style.tree,this.gfx)}}),gf.debug.MapPanel=function(game){gf.debug.Panel.call(this,game),this.name="map",this.title="Mini-Map",this.map=null,this.maps={},this._cache={numStates:0,state:null}},gf.inherit(gf.debug.MapPanel,gf.debug.Panel,{createPanelElement:function(){var div=gf.debug.Panel.prototype.createPanelElement.call(this);return this.states=document.createElement("ul"),gf.debug.ui.addClass(this.states,"states"),gf.debug.ui.delegate(this.states,"click","li",this.onClickState.bind(this)),div.appendChild(this.states),this.mapsui=document.createElement("ul"),gf.debug.ui.addClass(this.mapsui,"maps"),gf.debug.ui.delegate(this.mapsui,"click","li",this.onClickMap.bind(this)),div.appendChild(this.mapsui),div},refresh:function(){this.buildStateList(),gf.debug.ui.empty(this.mapsui),this.map&&this.map.hide(),this.map=null},buildStateList:function(){gf.debug.ui.empty(this.states);var name,state,states=this.game.state.states;for(name in states){state=states[name];var li=this.createLi("state",name,state.visible);li.dataset.name=name,this.states.appendChild(li),this.maps[name]?this.maps[name].render(!0):this.maps[name]=new gf.debug.Minimap(this._panel,state)}},buildMapList:function(state){gf.debug.ui.empty(this.mapsui);for(var i=0;i<state.world.children;++i){var child=state.world.children[i];if(child instanceof gf.Tilemap){var li=this.createLi("map",child._cachekey,child.visible);if(li.dataset.index=i,child.children.length){for(var ul=document.createElement("ul"),add=!1,l=0;l<child.children;++l){var layer=child.children[l];if("tilelayer"===layer.type){var lli=this.createLi("layer",layer.name,layer.visible);lli.dataset.mapIndex=i,lli.dataset.index=l,ul.appendChild(lli),add=!0}}add&&li.appendChild(ul)}this.mapsui.appendChild(li)}}},createLi:function(cls,text,active){var li=document.createElement("li");return gf.debug.ui.addClass(li,cls),gf.debug.ui.setText(li,text),active&&gf.debug.ui.addClass("active"),li},onClickState:function(e){var data=e.target.dataset;this.map&&this.map.hide(),this.map=this.maps[data.name],this.map.show(),this.buildMapList(this.game.state.states[data.name])},onClickMap:function(e){var obj,data=e.target.dataset;obj=data.mapIndex!==undefined?this._cache.state.world.children[data.mapIndex].children[data.index]:this._cache.state.world.children[data.index],obj.visible=!obj.visible,obj.visible?e.target.addClass("active"):e.target.removeClass("active")},tick:function(){this.active&&((this._cache.numStates!==this.game.state.count||this._cache.state!==this.game.state.active)&&(this._cache.numStates=this.game.state.count,this._cache.state=this.game.state.active,this.refresh(),this.map=this.maps[this.game.state.active.name]),this.map&&this.map.render())}}),gf.debug.Graph=function(container,width,height,dataStyles){this.canvas=document.createElement("canvas"),this.canvas.width=width,this.canvas.height=height,container.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.dataCanvases=[document.createElement("canvas"),document.createElement("canvas")],this.dataCtxs=[this.dataCanvases[0].getContext("2d"),this.dataCanvases[1].getContext("2d")],this.dataScroll=[0,0],this.dataIndex=0,this.label="ms",this.labelPrecision=0,this.labelStyle="rgba(200, 200, 200, 0.6)",this.max=50,this.dataLineWidth=1,this.padding=5,this.keySize=115,this.dataCanvases[0].width=this.dataCanvases[1].width=width-this.keySize,this.dataCanvases[0].height=this.dataCanvases[1].height=height,this.data=[],this.styles=dataStyles||{},this.styles._default||(this.styles._default="red"),this.styles.event||(this.styles.event="gray")},gf.inherit(gf.debug.Graph,Object,{addData:function(values){this.data.push(values),this.data.length>(this.canvas.width-this.keySize)/this.dataLineWidth&&this.data.shift(),this.render()},render:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.updateData(),this.drawBg(),this.drawKey(),this.drawData()},drawBg:function(){var ctx=this.ctx,minX=this.keySize,maxX=this.canvas.width,maxY=this.canvas.height,step=maxY/3;ctx.strokeStyle=ctx.fillStyle=this.labelStyle,ctx.beginPath(),ctx.moveTo(minX,step),ctx.lineTo(maxX,step),ctx.stroke(),ctx.beginPath(),ctx.moveTo(minX,2*step),ctx.lineTo(maxX,2*step),ctx.stroke(),ctx.beginPath(),ctx.moveTo(minX,maxY),ctx.lineTo(maxX,maxY),ctx.stroke(),ctx.fillText((2*(this.max/3)).toFixed(this.labelPrecision)+this.label,minX+this.padding,step-this.padding),ctx.fillText((this.max/3).toFixed(this.labelPrecision)+this.label,minX+this.padding,2*step-this.padding)},drawKey:function(){var ctx=this.ctx,i=0,box=10,data=this.data[this.data.length-1],pad=this.padding,lbl=this.labelStyle;for(var k in this.styles){var style=this.styles[k],y=box*i+pad*(i+1),val="number"==typeof data[k]?data[k].toFixed(2):null,text=k+(val?" ("+val+" ms)":"");ctx.fillStyle=style,ctx.fillRect(pad,y,box,box),ctx.fillStyle=lbl,ctx.fillText(text,pad+box+pad,y+box),i++}},drawData:function(){var i=this.dataIndex,ni=this.dataIndex?0:1,c1=this.dataCanvases[i],s1=this.dataScroll[i],c2=this.dataCanvases[ni],s2=this.dataScroll[ni],w=c1.width,h=c1.height;this.ctx.drawImage(c1,0,0,s1,h,w-s1+this.keySize,0,s1,h),this.ctx.drawImage(c2,s2-w,0,w-(s2-w),h,this.keySize,0,w-(s2-w),h),w===s1&&(this.dataScroll[ni]=this.dataLineWidth,this.dataCtxs[ni].clearRect(0,0,w,h),this.dataIndex=ni)},updateData:function(){var ctx=this.dataCtxs[this.dataIndex],x=this.dataScroll[this.dataIndex],maxY=this.dataCanvases[this.dataIndex].height,lw=this.dataLineWidth,vals=this.data[this.data.length-1],v=0,step=0,y=maxY;for(var k in vals)ctx.beginPath(),ctx.strokeStyle=ctx.fillStyle=this.styles[k]||this.styles._default,ctx.lineWidth=lw,v=vals[k],"event"===k?(ctx.moveTo(x,maxY),ctx.lineTo(x,0),ctx.fillText(v,x+this.padding,2*this.padding)):(step=v/this.max*maxY,step=0>step?0:step,ctx.moveTo(x,y),ctx.lineTo(x,y-=step)),ctx.stroke();this.dataScroll[0]+=lw,this.dataScroll[1]+=lw}}),gf.debug.Minimap=function(container,state){this.canvas=document.createElement("canvas"),this.prerenderCanvas=document.createElement("canvas"),container.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.pctx=this.prerenderCanvas.getContext("2d"),this.world=state.world,this.camera=state.camera,this.scale=.25,this._hasRendered=!1,this.viewportRectColor="rgba(255, 0, 255, 1)",this.active=!0},gf.inherit(gf.debug.Minimap,Object,{show:function(){gf.debug.show(this.canvas),this.active=!0},hide:function(){gf.debug.hide(this.canvas),this.active=!1},render:function(full){this.map&&this.active&&((full||!this._hasRendered)&&(this._hasRendered=!0,this.canvas.width=this.prerenderCanvas.width=this.map.size.x*this.map.tileSize.x*this.scale,this.canvas.height=this.prerenderCanvas.height=this.map.size.y*this.map.tileSize.y*this.scale,this.prerender()),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawMap(),this.drawObjects(),this.drawViewport())},drawMap:function(){this.ctx.drawImage(this.prerenderCanvas,0,0)},drawObjects:function(){},drawViewport:function(){var w=this.world,p=w.position,c=this.camera,s=this.scale;this.ctx.strokeStyle=this.viewportRectColor,this.ctx.strokeRect(-p.x*s/w.scale.x,-p.y*s/w.scale.x,c.size.x*s/w.scale.x,c.size.y*s/w.scale.y)},prerender:function(){for(var world=this.game.world,w=0,wl=world.children.length;wl>w;++w)world.children[w].visible&&world.children[w]instanceof gf.Tilemap&&this.prerenderMap(world.children[w])},prerenderMap:function(map){for(var l=0,ll=map.children.length;ll>l;++l){var layer=map.children[l];layer.tileIds&&layer.visible&&this.prerenderLayer(layer,map)}},prerenderLayer:function(layer,map){for(var size=map.size,x=0,xl=size.x;xl>x;++x)for(var y=0,yl=size.y;yl>y;++y){var id=x+y*size.x,tid=layer.tileIds[id];this.prerenderTile(tid,map,x,y)}},prerenderTile:function(tid,map,x,y){var set=map.getTileset(tid),tx=set.getTileTexture(tid);set&&tx&&this.pctx.drawImage(tx.baseTexture.source,tx.frame.x,tx.frame.y,tx.frame.width,tx.frame.height,x,y,tx.frame.width*this.scale,tx.frame.height*this.scale)}});var STICK_OFFSET=10,btnIds=["button-1","button-2","button-3","button-4","button-left-shoulder-top","button-right-shoulder-top","button-left-shoulder-bottom","button-right-shoulder-bottom","button-select","button-start","stick-1","stick-2","button-dpad-top","button-dpad-bottom","button-dpad-left","button-dpad-right"],axisIds=[["stick-1-axis-x","stick-1"],["stick-1-axis-y","stick-1"],["stick-2-axis-x","stick-2"],["stick-2-axis-y","stick-2"]],template='<div class="gf_debug_gp_buttons"><div class="gf_debug_gp_face" name="button-1"></div><div class="gf_debug_gp_face" name="button-2"></div><div class="gf_debug_gp_face" name="button-3"></div><div class="gf_debug_gp_face" name="button-4"></div><div class="gf_debug_gp_top-shoulder" name="button-left-shoulder-top"></div><div class="gf_debug_gp_top-shoulder" name="button-right-shoulder-top"></div><div class="gf_debug_gp_bottom-shoulder" name="button-left-shoulder-bottom"></div><div class="gf_debug_gp_bottom-shoulder" name="button-right-shoulder-bottom"></div><div class="gf_debug_gp_select-start" name="button-select"></div><div class="gf_debug_gp_select-start" name="button-start"></div><div class="gf_debug_gp_stick" name="stick-1"></div><div class="gf_debug_gp_stick" name="stick-2"></div><div class="gf_debug_gp_face" name="button-dpad-top"></div><div class="gf_debug_gp_face" name="button-dpad-bottom"></div><div class="gf_debug_gp_face" name="button-dpad-left"></div><div class="gf_debug_gp_face" name="button-dpad-right"></div></div><div class="gf_debug_gp_labels"><label for="button-1">?</label><label for="button-2">?</label><label for="button-3">?</label><label for="button-4">?</label><label for="button-left-shoulder-top">?</label><label for="button-right-shoulder-top">?</label><label for="button-left-shoulder-bottom">?</label><label for="button-right-shoulder-bottom">?</label><label for="button-select">?</label><label for="button-start">?</label><label for="stick-1">?</label><label for="stick-2">?</label><label for="button-dpad-top">?</label><label for="button-dpad-bottom">?</label><label for="button-dpad-left">?</label><label for="button-dpad-right">?</label><label for="stick-1-axis-x">?</label><label for="stick-1-axis-y">?</label><label for="stick-2-axis-x">?</label><label for="stick-2-axis-y">?</label></div><div class="gf_debug_gp_name">Grapefruit</div>';if(gf.debug.Gamepad=function(){var el=this.element=document.createElement("div");el.classList.add("gf_debug_gp"),el.innerHTML=template},gf.inherit(gf.debug.Gamepad,Object,{updateButton:function(status){var buttonEl=this.element.querySelector('[name="'+btnIds[status.code]+'"]'),labelEl=this.element.querySelector('label[for="'+btnIds[status.code]+'"]');labelEl.innerHTML=status.value.toFixed(2),status.down?(buttonEl.classList.add("pressed"),labelEl.classList.add("visible")):(buttonEl.classList.remove("pressed"),labelEl.classList.remove("visible"))},updateAxis:function(status){var stickEl=this.element.querySelector('[name="'+axisIds[status.code][1]+'"]'),labelEl=this.element.querySelector('label[for="'+axisIds[status.code][0]+'"]'),offsetVal=status.value*STICK_OFFSET;status.code===gf.input.GP_AXIS.LEFT_ANALOGUE_HOR||status.code===gf.input.GP_AXIS.RIGHT_ANALOGUE_HOR?stickEl.style.marginLeft=offsetVal+"px":stickEl.style.marginTop=offsetVal+"px",labelEl.innerHTML=status.value.toFixed(2),0!==status.value?(labelEl.classList.add("visible"),status.value>0?labelEl.classList.add("positive"):labelEl.classList.add("negative")):(labelEl.classList.remove("visible"),labelEl.classList.remove("positive"),labelEl.classList.remove("negative"))}}),gf.debug.ui={delegate:function(dom,evt,selector,fn){dom.addEventListener(evt,function(e){e.target&&e.target.matches(selector)&&fn&&fn(e)})},removeClass:function(dom,cls){var classes=dom.className.split(" "),i=classes.indexOf(cls);-1!==i&&(classes.splice(i,1),dom.className=classes.join(" ").trim())},addClass:function(dom,cls){var classes=dom.className.split(" ");classes.push(cls),dom.className=classes.join(" ").trim()},setText:function(dom,txt){dom.textContent=txt},setHtml:function(dom,html){dom.innerHTML=html},setStyle:function(dom,style,value){if("string"==typeof style)dom.style[style]=value;else for(var key in style)dom.style[key]=style[key]},empty:function(dom){for(;dom.firstChild;)dom.removeChild(dom.firstChild)},show:function(dom){this.setStyle(dom,"display","block")},hide:function(dom){this.setStyle(dom,"display","none")}},!HTMLElement.prototype.matches){var htmlprot=HTMLElement.prototype;htmlprot.matches=htmlprot.matches||htmlprot.webkitMatchesSelector||htmlprot.mozMatchesSelector||htmlprot.msMatchesSelector||htmlprot.oMatchesSelector||function(selector){for(var element,elements=this.parentElement.querySelectorAll(selector),i=0;element=elements[i++];)if(element===this)return!0;return!1}}}(window);